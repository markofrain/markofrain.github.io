<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> 雪里</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      
<link rel="stylesheet" href="/css/fonts/remixicon.css">

      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.staticfile.org/pace/1.2.4/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover4.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">雪里</a></h1>
      <div id="subtitle-box">
        
        <span id="subtitle"></span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>



<script src="https://cdn.staticfile.org/typed.js/2.0.12/typed.min.js"></script>


<!-- Subtitle -->

  <script>
    try {
      var typed = new Typed("#subtitle", {
        strings: ['面朝大海，春暖花开', '愿你一生努力，一生被爱', '想要的都拥有，得不到的都释怀'],
        startDelay: 0,
        typeSpeed: 200,
        loop: true,
        backSpeed: 100,
        showCursor: true
      });
    } catch (err) {
      console.log(err)
    }
  </script>
  
<div id="main">
  <section class="outer">
  
  
  <article class="articles">
    
    
    
    
    <article
  id="post-WebGIS/GIS基础"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/04/17/WebGIS/GIS%E5%9F%BA%E7%A1%80/"
    >GIS基础</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/04/17/WebGIS/GIS%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2022-04-16T16:00:00.000Z" itemprop="datePublished">2022-04-17</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/WebGIS/">WebGIS</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="GIS坐标系基础"><a href="#GIS坐标系基础" class="headerlink" title="GIS坐标系基础"></a>GIS坐标系基础</h2><h3 id="坐标系"><a href="#坐标系" class="headerlink" title="坐标系"></a>坐标系</h3><p>坐标系统分为<strong>地理坐标系</strong>和<strong>投影坐标系</strong></p>
<table>
<thead>
<tr>
<th>坐标系</th>
<th>坐标系统</th>
<th>表示方法</th>
</tr>
</thead>
<tbody><tr>
<td>地理坐标系</td>
<td>地球椭球体</td>
<td>经纬度</td>
</tr>
<tr>
<td>投影坐标系</td>
<td>平面</td>
<td>米</td>
</tr>
</tbody></table>
<p>常见坐标系统</p>
<table>
<thead>
<tr>
<th>坐标系</th>
<th>椭球体</th>
<th>坐标原点</th>
</tr>
</thead>
<tbody><tr>
<td>1954北京坐标系</td>
<td>克拉索夫斯基椭球体</td>
<td>椭球体中心</td>
</tr>
<tr>
<td>1980西安坐标系</td>
<td>1975国际椭球</td>
<td>椭球体中心</td>
</tr>
<tr>
<td>WGS1984</td>
<td>WGS1984椭球体</td>
<td>椭球体地心</td>
</tr>
<tr>
<td>CGCS2000</td>
<td>与我们国家地形逼近的椭球</td>
<td>椭球体地心</td>
</tr>
</tbody></table>
<p>地理坐标系是建立在椭球体基础上的，然而我们拿到手上的通常是一个平面的地图，所以需要把椭球按照一定的法则展开到平面上，这就是投影坐标系</p>
<h3 id="投影转换"><a href="#投影转换" class="headerlink" title="投影转换"></a>投影转换</h3><p>​        地球球体是曲面的，而地图通常要绘制在平面图纸上，因此需要把曲面展开成平面，需要以特殊的方法将曲面展开，使其成为没有破裂和褶皱的平面，于是就出现了地理投影论。</p>
<p>​        其基本原理就是∶因为球面上一点的位置决定于它的经纬度，所以实际投影时是先将一些经纬线的交点展绘在平面上，再将相同的经纬度的点连成经线，相同的纬度的点连成纬线，构成经纬网。有了经纬网以后，就可以将球面上的点，按其经纬度绘在平面上相应的位置处。</p>
<p>​        地图投影的种类很多，一般按照两种标准进行分类∶一是按投影的变形性质分类，二是按照投影的构成方式分类。 </p>
<p>​        <strong>按投影变形性质分类∶</strong> </p>
<p>​        （1）等角投影。能保持无限小图形的相似。同一点上长度比处处相同，不同点变形圆的半径不同，大范围看，投影图形与地面实际形状并不完全相似。由于这种投影无角度变形，便于图上量测方向/角度，所以常用于对真实角度和方向要求高的地图，如航海、洋流和风向图等。由于此类投影面积变形很大，故不能量算面积。 </p>
<p>​        （2）等面积投影。等积投影是等面积投影，便于面积的比较和量算。常用于对面积精度要求较高的自然和经济地图，如地质、土壤、土地利用、行政区划等地图。 </p>
<p>​        （3）任意投影。既不等角又不等积，各方面变形都存在，但都适中。在任意投影中，有一类比较特殊的投影叫做等距投影，满足正轴投影中经线长度比为 1，在斜轴或横轴投影中垂直圈长度比为1。 </p>
<p>​        按<strong>投影构成方式分类∶</strong></p>
<p>​         （1）几何投影。几何投影是把椭球体面上的经纬网直接或附加某种条件投影到几何承影面上，然后将几何面展开为平面而得到的一类投影，包括方位投影、圆锥投影和圆柱投影。根据投影面与球面的位置关系的不同又可将其划分为正轴投影、横轴投影、斜轴投影。</p>
<p>​         （2）解析投影。解析投影是不借助于辅助几何面，直接用解析法得到经纬网的一种投影，主要包括伪方位投影、伪圆锥投影、伪圆柱投影、多圆锥投影。 目前常用的投影有莫卡托投影（正轴等角圆柱投影）、高斯-克吕格投影（等角横切圆柱投影）、UTM投影（等角横轴割圆柱投影）、Lambert 投影（等角正割圆锥投影）等。 </p>
<h2 id="GIS数据与应用"><a href="#GIS数据与应用" class="headerlink" title="GIS数据与应用"></a>GIS数据与应用</h2><p>​        空间数据树GIS的心脏。根据数据来源的不同，地理数据包括地图数据、遥感影像数据、地形数据，以及其他的统计数据、文字报告等。针对空间数据，GIS有两大基本存储模型，一种是<strong>矢量数据模型</strong>，另一种是<strong>栅格数据模型</strong>。</p>
<p>​        矢量数据模型以离散的点坐标表示地理要素，通过点、线、面以及注记来抽象表达空间实体以及实体间的关系;        栅格数据模型则以一系列栅格值来表示，基于网格结构使用不同颜色和灰度的像元来表达</p>
<p>​        一般来说，具有明确对象的空间数据，一般使用矢量数据模型存储，如地籍数据、行政边界、街道等;具有连续空间变化的空间数据，则使用栅格数据模型存储。 </p>
<h3 id="矢量地图与瓦片地图"><a href="#矢量地图与瓦片地图" class="headerlink" title="矢量地图与瓦片地图"></a>矢量地图与瓦片地图</h3><p>​        在WebGIS应用中，WebGIS的二维地图主要分为<strong>矢量地图</strong>和<strong>瓦片地图</strong>两种格式。</p>
<h4 id="矢量地图"><a href="#矢量地图" class="headerlink" title="矢量地图"></a>矢量地图</h4><p>​        矢量地图通常指采用矢量数据模型存储的矢量数据组织的地图。<u>矢量地图加载是根据客户端请求的地图范围实时从服务器的地图数据库取图，实时生成请求范围对应的地图，返回给客户端一张地图图片</u>。其中，遥感影像与矢量地图采用同样的出图机制和方法。</p>
<h4 id="瓦片"><a href="#瓦片" class="headerlink" title="瓦片"></a>瓦片</h4><p>​        瓦片即网格中有多个类似瓦片的图片集。瓦片数据是将矢量或影像数据进行预处理，采用高效的缓存机制（如金字塔）形成的缓存图片集，采用”级、行、列”方式进行组织，可在网页中快速加载。因此，瓦片地图加载是根据客户端请求的地图范围和级别，通过计算行列号获取对应级别下网格的瓦片（即服务器预裁剪的图片），由这些瓦片集在客户端形成一张地图。</p>
<p><img src="https://fsats-blog.oss-cn-beijing.aliyuncs.com/blog/image-20220417185518893.png" alt="image-20220417185518893"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-WebGIS/OpenLayers开发基础"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/04/17/WebGIS/OpenLayers%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/"
    >OpenLayers开发基础</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/04/17/WebGIS/OpenLayers%E5%BC%80%E5%8F%91%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2022-04-16T16:00:00.000Z" itemprop="datePublished">2022-04-17</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/WebGIS/">WebGIS</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="OpenLayers-API"><a href="#OpenLayers-API" class="headerlink" title="OpenLayers API"></a>OpenLayers API</h2><p>核心类和组件如下:</p>
<ol>
<li>Map(ol.Map)：地图容器，核心部分，可加载各类地图与功能控件，用于渲染显示动态地图。</li>
<li>View(ol.View)：地图视图，控制地图缩放等基本交互、地图投影坐标系、地图中心点、分辨率、旋转角度等。</li>
<li>Layers(ol.Layer.Base)：图层，包含多个调用数据的子类，由其子类实例加载地图数据，必须结合数据源(Source)匹配使用。</li>
<li>Sources（ol.source.Source）∶图层数据源，与图层子类对应，由数据源的实例来加载各种类型的地图数据。</li>
<li>Format（ol.format.Feature）∶数据解析类，此类用于读/写各种格式的数据，创建了多种格式的子类，即数据解析器。目前支持多种数据格式，如 GeoJSON、GML、XML、WKT、WFS等。 </li>
<li>Geometry（ol.geom.Geometry）∶地理空间对象的几何实体，由其子类（如 Point、LineString、Polygon）的实例构成了我们所看到的矢量地图。 </li>
<li>Feature（ol.Feature）;地图要素，可看成矢量地图的组成单元，是地图中的主要部分，点、线、面等几何实体均可组织为地图要素，配合要素的样式渲染到客户端的地图上。 </li>
<li>Overlay（ol.Overlay）∶叠加层，即叠加到地图上显示的要素，关联自定义的一个HTML 元素，由一个单一的地图坐标点确定叠加位置。与控件（Control）类似，但不同的是叠加元素不是在一个固定的屏幕位置上，而是通过关联一个地图逻辑坐标点跟随地图移动，如标注点、popup 等。 </li>
<li>Controls（ol.control.Control）∶即通常所说的控件类，提供各种各样的地图功能控件，如地图缩放控件（Zoom）、鼠标位置控件（MousePosition）、鹰眼（OverViewMap）、比例尺（ScaleLine）等。 </li>
<li>Interaction（ol.interaction.Interaction）∶地图交互控件类。地图交互一般用鼠标与键 盘操作去操控，因此 Interaction 子类为基于鼠标与键盘操控的地图交互功能控件，如选择要素控件（Select）、键盘缩放地图控件（KeyboardZoom）、鼠标控件基类（Pointer）下的绘制控件（Draw））、修改控件（Modify）、拖放平移地图控件（DragPan）等。 </li>
<li>Style（ol.style.Style）∶样式类，通过其子类实例来渲染矢量要素的样式，包括填充样式（Fill）、边界样式（Stroke）、图标样式（Image 与Icon）、文字样式（Text）等。 </li>
<li>Projections（ol.pro.Projection）∶地图投影定义类，包括EPSG∶4326（ol.proj.EPSG4326）与EPSG∶3857（ol.proj.EPSG3857）的定义，在地图视图（View）中可以设置地图的投影坐标系，也可以通过ol.proj提供的方法进行投影变换。 </li>
<li>Renderer（ol.renderer.Renderer）∶渲染器。在 OpenLayers 3中，渲染功能作为 Map 的一个属性存在，支持 Canvas、DOM、WebGL三种渲染方式。可通过设置 Map 的 renderer 属性设定地图渲染方式。 </li>
</ol>
<p><img src="https://fsats-blog.oss-cn-beijing.aliyuncs.com/blog/image-20220417193600979.png" alt="image-20220417193600979"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Redis/Redis故障相关问题"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/04/01/Redis/Redis%E6%95%85%E9%9A%9C%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/"
    >Redis故障相关问题</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/04/01/Redis/Redis%E6%95%85%E9%9A%9C%E7%9B%B8%E5%85%B3%E9%97%AE%E9%A2%98/" class="article-date">
  <time datetime="2022-03-31T16:00:00.000Z" itemprop="datePublished">2022-04-01</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Redis/">Redis</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="MISCONF-Redis-is-configured-to-save-RDB-snapshots-but-it-is-currently-not-able-to-persist-on-disk-Commands-that-may-modify-the-data-set-are-disabled-because-this-instance-is-configured-to-report-errors-during-writes-if-RDB-snapshotting-fails-stop-writes-on-bgsave-error-option-Please-check-the-Redis-logs-for-details-about-the-RDB-error"><a href="#MISCONF-Redis-is-configured-to-save-RDB-snapshots-but-it-is-currently-not-able-to-persist-on-disk-Commands-that-may-modify-the-data-set-are-disabled-because-this-instance-is-configured-to-report-errors-during-writes-if-RDB-snapshotting-fails-stop-writes-on-bgsave-error-option-Please-check-the-Redis-logs-for-details-about-the-RDB-error" class="headerlink" title="MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error"></a>MISCONF Redis is configured to save RDB snapshots, but it is currently not able to persist on disk. Commands that may modify the data set are disabled, because this instance is configured to report errors during writes if RDB snapshotting fails (stop-writes-on-bgsave-error option). Please check the Redis logs for details about the RDB error</h3><p>MISCONF Redis被配置为保存RDB快照，但它目前不能在磁盘上持久化。可能修改数据集的命令被禁用，因为这个实例被配置为如果RDB快照失败，在写过程中报告错误(stop-write -on-bgsave-error选项)。关于RDB错误的详细信息，请查看Redis日志</p>
<p>参考博客描述 <a target="_blank" rel="noopener" href="https://blog.csdn.net/u014071875/article/details/103715183">https://blog.csdn.net/u014071875/article/details/103715183</a></p>
<p><strong>错误原因：</strong></p>
<p>主要原因是保存RDB失败，执行bgsave命令时出现了问题。</p>
<p>查看日志，在window上的redis日志是Redis安装目录下的server_log.txt，可以看到相关的信息</p>
<blockquote>
<p>The Windows version of Redis reserves heap memory from the system paging file<br>for sharing with the forked process used for persistence operations. At this time there is insufficient contiguous free space available in the<br>system paging file. You may increase the size of the system paging file.<br>Sometimes a reboot will defragment the system paging file sufficiently for<br>this operation to complete successfully. </p>
</blockquote>
<blockquote>
<p>Windows版本的Redis从系统分页文件中保留堆内存</p>
<p>用于共享用于持久化操作的分叉进程。中没有足够的连续可用空间</p>
<p>系统的分页文件。您可以增加系统分页文件的大小。</p>
<p>有时，重新启动将对系统分页文件进行足够的碎片整理</p>
<p>该操作才能成功完成。</p>
</blockquote>
<p><strong>解决方案</strong></p>
<p>windows上参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/xhh_1817/article/details/110948531">https://blog.csdn.net/xhh_1817/article/details/110948531</a></p>
<p>计算机-&gt;高级系统设置-&gt;高级-&gt;性能设置-&gt;高级-&gt;虚拟内存更改-&gt;选择Redis所在的盘自定义大小设置，完了重启Redis服务就好了。</p>
<p>同时为系统盘和Redis所在数据盘留出足够的的空间</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Docker/docker离线安装"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/12/31/Docker/docker%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/"
    >docker离线安装</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/12/31/Docker/docker%E7%A6%BB%E7%BA%BF%E5%AE%89%E8%A3%85/" class="article-date">
  <time datetime="2021-12-31T04:00:00.000Z" itemprop="datePublished">2021-12-31</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Docker/">Docker</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>到 <a target="_blank" rel="noopener" href="https://download.docker.com/linux/static/stable/x86_64/">https://download.docker.com/linux/static/stable/x86_64/</a> 地址找到对应的docker.tgz包。里面是docker的可执行二进制文件。</p>
<p>官方文档在 <a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/binaries/#install-static-binaries">https://docs.docker.com/engine/install/binaries/#install-static-binaries</a> 中。</p>
<p>很多人没有看到这块，只看到了yum安装和rpm安装。这些都是需要网的。提供的rpm的docker仓库里的几个rpm，虽然说是docker必须的，但是其中有许多的依赖包并没有提供。因此还是需要网自动下载依赖。因此要想离线安装必须使用静态二进制的安装方式。</p>
<p>docker二进制文件可以直接启动。但是需要把他做成服务，便于管理。因此需要做成systemd service。</p>
<p>注意：网上的18.x.x版本比较老。会有些bug。比如docker-compose内，部分容器无法访问其他容器映射到宿主机的端口，无法ping同宿主机。</p>
<p>解压，并将二进制文件放到在存在环境变量的目录中</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar  -xvf  docker-20.10.9.tgz</span><br><span class="line">cp  docker/*    /usr/bin/</span><br></pre></td></tr></table></figure>

<p>注册docker 服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/systemd/system/docker.service</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Docker Application Container Engine</span><br><span class="line">Documentation=https://docs.docker.com</span><br><span class="line">After=network-online.target firewalld.service</span><br><span class="line">Wants=network-online.target</span><br><span class="line">[Service]</span><br><span class="line">Type=notify</span><br><span class="line"><span class="meta">#</span><span class="bash"> the default is not to use systemd <span class="keyword">for</span> cgroups because the delegate issues still</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> exists and systemd currently does not support the cgroup feature <span class="built_in">set</span> required</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> containers run by docker</span></span><br><span class="line">ExecStart=/usr/bin/dockerd</span><br><span class="line">ExecReload=/bin/kill -s HUP $MAINPID</span><br><span class="line"><span class="meta">#</span><span class="bash"> Having non-zero Limit*s causes performance problems due to accounting overhead</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> the kernel. We recommend using cgroups to <span class="keyword">do</span> container-local accounting.</span></span><br><span class="line">LimitNOFILE=infinity</span><br><span class="line">LimitNPROC=infinity</span><br><span class="line">LimitCORE=infinity</span><br><span class="line"><span class="meta">#</span><span class="bash"> Uncomment TasksMax <span class="keyword">if</span> your systemd version supports it.</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Only systemd 226 and above support this version.</span></span><br><span class="line"><span class="meta">#</span><span class="bash">TasksMax=infinity</span></span><br><span class="line">TimeoutStartSec=0</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> delegate yes so that systemd does not reset the cgroups of docker containers</span></span><br><span class="line">Delegate=yes</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">kill</span> only the docker process, not all processes <span class="keyword">in</span> the cgroup</span></span><br><span class="line">KillMode=process</span><br><span class="line"><span class="meta">#</span><span class="bash"> restart the docker process <span class="keyword">if</span> it exits prematurely</span></span><br><span class="line">Restart=on-failure</span><br><span class="line">StartLimitBurst=3</span><br><span class="line">StartLimitInterval=60s</span><br><span class="line"> </span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/systemd/system/docker.service</span><br><span class="line">systemctl  daemon-reload</span><br><span class="line">systemctl  start docker</span><br><span class="line">systemctl  enable  docker.service</span><br><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Java/JVM启动参数"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/12/06/Java/JVM%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0/"
    >JVM启动参数</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/12/06/Java/JVM%E5%90%AF%E5%8A%A8%E5%8F%82%E6%95%B0/" class="article-date">
  <time datetime="2021-12-06T04:00:00.000Z" itemprop="datePublished">2021-12-06</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h3 id="JVM-参数"><a href="#JVM-参数" class="headerlink" title="JVM 参数"></a>JVM 参数</h3><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-Xmx / -XX:MaxHeapSize</td>
<td>堆内存最大大小</td>
</tr>
<tr>
<td>-Xms / -XX:InitialHeapSize</td>
<td>堆内存初始大小</td>
</tr>
<tr>
<td>-Xmn</td>
<td>新生代大小</td>
</tr>
<tr>
<td>-XX:+HeapDumpOnOutOfMemoryError</td>
<td>当出现内存溢出时Dump出当前内存堆转储快照文件</td>
</tr>
<tr>
<td>-Xss</td>
<td>栈大小</td>
</tr>
<tr>
<td>-XX:MetaspaceSize=</td>
<td>元空间初始大小，以字节为单位</td>
</tr>
<tr>
<td>-XX:MaxMetaspaceSize=</td>
<td>元空间最大值，默认是-1，只受限于本地内存大小</td>
</tr>
<tr>
<td>-XX:MinMetaspaceFreeRatio=</td>
<td>在垃圾收集后控制最小的元空间 剩余容量的百分比</td>
</tr>
<tr>
<td>-XX:MaxMetaspaceFreeRatio=</td>
<td>控制最大的元空间 剩余容量的百分比</td>
</tr>
<tr>
<td>-XX:MaxDirectMemorySize=10M</td>
<td>最大直接内存大小</td>
</tr>
<tr>
<td>-Xloggc:gc.log</td>
<td>输出gc日志到文件，目录需提前存在</td>
</tr>
<tr>
<td>-XX:+PrintGC</td>
<td>控制台打印GC日志，配置了输出文件，则不会控制台打印</td>
</tr>
<tr>
<td>-XX:PretenureSizeThreshold=3145728</td>
<td>指定大于该值的对象直接在老年代分配。只对Serial和ParNew两款新生代收集器有效</td>
</tr>
<tr>
<td>-XX:+PrintGCDetails</td>
<td>打印GC收集器日志</td>
</tr>
<tr>
<td>-XX:SurvivorRatio=8</td>
<td>决定了新生代中Eden区与一 个Survivor区的空间比例是8∶1</td>
</tr>
<tr>
<td>-XX:MaxTenuringThreshold=1</td>
<td>对象晋升老年代的年龄阈值</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="关键术语"><a href="#关键术语" class="headerlink" title="关键术语"></a>关键术语</h3><p>JNI</p>
<p>JMX</p>
<p>JIT</p>
<p>AOT</p>
<p>Minor GC/Young GC：新生代收集</p>
<p>Partial GC：部分收集</p>
<p>Major GC/Old GC：老年代收集</p>
<p>Mixed GC：混合收集</p>
<p>Full GC：整堆收集</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/58/">58</a><a class="extend next" rel="next" href="/page/5/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020-2022
        <i class="ri-heart-fill heart_icon"></i> 陈光奇
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      
        <li>
          <a href="https://beian.miit.gov.cn/" target="_black" rel="nofollow">京ICP备17065668号-3</a>
        </li>
        
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer.jpg" alt="雪里"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/photos">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2020/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.png">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.png">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.staticfile.org/jquery-modal/0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.staticfile.org/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.staticfile.org/photoswipe/4.1.3/default-skin/default-skin.min.css">
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="https://cdn.staticfile.org/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->

<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->

<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.staticfile.org/clipboard.js/2.0.10/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>